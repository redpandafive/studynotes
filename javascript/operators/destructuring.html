<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Index</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link
      rel="stylesheet"
      href="../../assets/bootstrap/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../../assets/styles/site.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="../../index.html">Home</a>
      </div>
    </nav>
    <div class="container">
      <nav class="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="../../index.html">Home</a></li>
          <li class="breadcrumb-item">
            <a href="../../index.html">JavaScript</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            Destructuring Assignment
          </li>
        </ol>
      </nav>

      <h1>Destructuring Assignment</h1>

      <section>
        <ul>
          <li>
            <a href="destructuring.html#basics">Basics</a>
          </li>
          <li>
            <a href="destructuring.html#objects">Destructuring Objects</a>
          </li>
          <li>
            <a href="destructuring.html#arrays">Destructuring Arrays</a>
          </li>
          <li>
            <a href="destructuring.html#functions">Destructuring Function Parameters</a>
          </li>
        </ul>
      </section>

      <h2 id="basics">Basics</h2>
      <section>
        <ul>
          <li>An expression that unpacks values from arrays, or properties from objects, into distinct variables</li>
          <li>
            Assignment means one or more values are extracted (destructured) from
            the value on the right and store into the variables on the left
          </li>
          <li>
            Object on the right side of the expression is not modified
          </li>
          <li>This is a compound declaration and assignment syntax</li>
          <li>
            The right side of the assignment operator is a structured value, such as:
            <ul>
              <li>Array</li>
              <li>Object</li>
            </ul>
          </li>
          <li>
            The left side specifies one or more variable names that mimics array
            and object literal syntax
          </li>

        </ul>
      </section>

      <h2 id="objects">Destructuring Objects</h2>
      <section>
        <ul>
          <li>The left side should be an object-like "pattern" for corresponding properties
            <ul>
              <li>
                This is called binding syntax
              </li>
              <li>
                In the simplest case, it is a list of variable names within <code>{ .... }</code>
              </li>
              <li>
                Order does not matter for left side
              </li>
            </ul>
          </li>
        </ul>
        <div>
          Can be used to simplify extracting properties from an object.  
          <div class="card">
            <div class="card-body">
              <code>
                var hero = { <br />
                name: 'Batman', <br />
                realName: 'Bruce Wayne' <br />
                }; <br />
                const { name, realName } = hero;<br />
                <br/>
                // equivalent to  <br/>
                const name = hero.name;<br/>
                const realName = hero.realName;<br/>
              </code>
            </div>
          </div>
        </div>

        <div>
          A default value can be added for properties that may not be in the object
          <div class="card">
            <div class="card-body">
              <code>
                var hero = { <br />
                name: 'Batman', <br />
                realName: 'Bruce Wayne' <br />
                }; <br />
                const { name, realName, canBatusi = true } = hero;<br />
              </code>
            </div>
          </div>
        </div>
      </section>

      <div>
        To alias the realName property to something other than the property name:
        <div class="card">
          <div class="card-body">
            <code>
              var hero = { <br />
              name: 'Batman', <br />
              realName: 'Bruce Wayne' <br />
              }; <br />
              const { name, realName: alterEgo } = hero;<br />
            </code>
          </div>
        </div>
      </div>

      
      <div>
        To extract values from nested objects
        <div class="card">
          <div class="card-body">
            <code>
              const hero = { <br />
                name: 'Batman', <br />
                realName: 'Bruce Wayne', <br />
                address: { <br />
                  city: 'Gotham' <br />
                } <br />
              }; <br />
              const { address: { city } } = hero; <br />
            </code>
          </div>
        </div>
      </div>

      <div>
        Unreferenced properties can be collected using rest syntax
        <div class="card">
          <div class="card-body">
            <code>
              const hero = { <br />
                name: 'Batman', <br />
                realName: 'Bruce Wayne',  <br />
                company: 'WayneCorp' <br />
              }; <br />
              const { name, ...rest } = hero; <br />
              console.log(rest); // => { realName: 'Bruce Wayne', company: 'WayneCorp' } <br />
              console.log(name); // => Batman
            </code>
          </div>
        </div>
      </div>

      <div>
        Combine with Object.entries method to loop over the key and values of an object. This outputs:
        <ul>
          <li>name:Batman</li>
          <li>realName:Bruce Wayne</li>
          <li>company:WayneCorp</li>
        </ul>
        <div class="card">
          <div class="card-body">
            <code>
              const hero = { <br />
                name: 'Batman', <br />
                realName: 'Bruce Wayne',  <br />
                company: 'WayneCorp' <br />
              }; <br />
              for (let [key, value] of Object.entries(user)) { <br />
                console.log(`${key}:${value}`);  <br />
              }
            </code>
          </div>
        </div>
      </div>
    </section>

      <h2 id="arrays">Destructuring Arrays</h2>
      <section>
        <div>
          Simple Examples
          <div class="card">
            <div class="card-body">
              <code>
                // Same as let x=1, y=2<br />
                let [x,y] = [1,2];<br />

                // Same as x = x + 1, y = y + 1<br />
                [x,y] = [x+1,y+1];<br />

                // Swap the value of the two variables. x now contains 3 and y
                contains 2<br />
                [x,y] = [y,x];
              </code>
            </div>
          </div>
        </div>

        <div>
          Simplifies working with functions that return arrays
          <div class="card">
            <div class="card-body">
              <code>
                function a(x,y) {<br />
                return [y,x];<br />
                }<br />

                function b(y,x) {<br />
                return [x,y];<br />
                }<br />

                // y contains 2, x contains 1<br />
                let [y,x] = a(1,2);<br />

                // r contains 1, s contains 2<br />
                let [r,s] = b(y,x);<br />
              </code>
            </div>
          </div>
        </div>

        <div>
          Two variables can be swapped in one destructuring expression
          <div class="card">
            <div class="card-body">
              <code>
                let a = 1;<br />
                let b = 3;<br />
                <br />
                // a contains 3, b contains 1 <br />
                [a, b] = [b, a];<br />
              </code>
            </div>
          </div>
        </div>

        <div>
          This uses a for loop to loop over all properties of an object and use
          destructuring to cover those pairs from 2 element arrays into
          individual variables

          <div class="card">
            <div class="card-body">
              <code>
                // outputs "x 1" and "y 2" <br />
                let o = { x: 1, y: 2 }; <br />
                for(const [name, value] of Object.entries(o)) {<br />
                console.log(name, value); <br />
                }
              </code>
            </div>
          </div>
        </div>

        <div>
          Extra variables on the left are undefined, extra values on the right
          are ignored.
          <div class="card">
            <div class="card-body">
              <code>
                // x == 1; y == undefined<br />
                let [x,y] = [1]; <br />

                // x == 1; y == 2<br />
                [x,y] = [1,2,3]; <br />
              </code>
            </div>
          </div>
        </div>

        <div>
          Use commas on the left to skip certain values on the right
          <div class="card">
            <div class="card-body">
              <code>
                // x == 2; y == 4<br />
                [,x,,y] = [1,2,3,4]; <br />
              </code>
            </div>
          </div>
        </div>

        <div>
          Use three dots to collect unused or remaining values into a single
          variable
          <div class="card">
            <div class="card-body">
              <code>
                // y == [2,3,4] <br />
                let [x, ...y] = [1,2,3,4];
              </code>
            </div>
          </div>
        </div>

        <div>
          This assigns global functions from the Math object into variables.
          Variable names on the left should match the property you want to copy.
          Items from MATH not listed on the left are ignored.
          <div class="card">
            <div class="card-body">
              <code>
                // Same as const sin=Math.sin, cos=Math.cos, tan=Math.tan <br />
                const {sin, cos, tan} = Math;
              </code>
            </div>
          </div>
        </div>

        <div>
          This performs like the above code, but gives the variables on the left
          different names
          <div class="card">
            <div class="card-body">
              <code>
                // Same as const cosine = Math.cos, tangent = Math.tan;<br />
                const { cos: cosine, tan: tangent } = Math;
              </code>
            </div>
          </div>
        </div>
      </section>


      <h2 id="functions">Destructuring Function Parameters</h2>
      <section>
        <ul>
          <li>One way to simplify a long list of function parameters is to pass an object to the function and destructure in the signature
            <ul>
              <li>Do not have to remember proper ordering of parameters since destructuring </li>
            </ul>
          </li>
          <li>This is particularly helpful when you have default values
            <ul>
              <li>These can just be eliminated from the object you pass in</li>
            </ul>
          </li>
        </ul>
        <div>
          This performs like the above code, but gives the variables on the left
          different names
          <div class="card">
            <div class="card-body">
              <code>
                // bad way to write the function <br/>
                function showMenu(title = "Untitled", width = 200, height = 100, items = []) { <br/>
                   ... <br/>
                } <br/>
                <br/>
                // better way to write the function <br/>
                let options = { <br/>
                  title: "My menu", <br/>
                  items: ["Item1", "Item2"] <br/>
                }; <br/>
                <br/>
                function showMenu({title = "Untitled", width = 200, height = 100, items = []}) { <br/>
                  console.log( `${title} ${width} ${height}` ); // My Menu 200 100 <br/>
                  console.log( items ); // Item1, Item2 <br/>
                }
              </code>
              </code>
            </div>
          </div>
        </div>
        <div>
          This example is a function that takes two parameters:
          <ul>
            <li>An array of items to calculate a total</li>
            <li>An option configuration object to pass in optional settings</li>
          </ul>
          Things to note:
          <ul>
            <li>If no second parameter is passed, a default empty object is created (prevents null reference errors)</li>
            <li>If the config object is missing a shipping parameter, the destructuring will add one with the value of SHIPPING_DEFAULT.  
              <ul>
                <li>Reference this value in the function using the shipping variable</li>
                <li>This same idea is true for the discount parameter as well</li>
              </ul>
            </li>
          </ul>
          <div class="card">
            <div class="card-body">
              <code>
                const SHIPPING_DEFAULT = 5; <br/>
                function calculateTotal(items, {shipping = SHIPPING_DEFAULT, discount = 0} = {}) { <br/>
                  ... <br/>
                } <br/>
              </code>
              </code>
            </div>
          </div>
        </div>
      </section>


      </section>
    </div>
    <script src="../assets/bootstrap/js/bootstrap.bundle.js"></script>
  </body>
</html>
